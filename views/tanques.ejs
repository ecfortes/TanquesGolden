<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/style.css" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <title>GOLDEN SUCOS</title>
</head>

<body style="background-color: #8a939f;">
  <header class="header">
    <div style="display: flex; align-items:center; ">
      <svg height="60" ; viewBox="0 0 36.04 36.14" style="fill:rgb(181,140,94)">
        <path d="M18 5.86a12.37 12.37 0 012.37.23 12.19 12.19 0 012.27.69 12.05 12.05 0 012.1 1.12 12.83 12.83 0 011.85 1.51 12.21 12.21 0 013.15 5.48l.15.57h-2.07a5.8 5.8 0 00-.45-1.41 9.65 9.65 0 00-.58-1.16 12 12 0 00-.73-1.08 9 9 0 00-.87-1 9.37 9.37 0 00-1.54-1.27 10.14 10.14 0 00-1.75-.94 9.85 9.85 0 00-1.9-.55 10 10 0 00-2-.2 9.92 9.92 0 00-2 .2 10.17 10.17 0 00-1.9.57 10.52 10.52 0 00-1.75.94 10.29 10.29 0 00-1.54 1.27 9.31 9.31 0 00-1.26 1.54 9.19 9.19 0 00-.94 1.75A9.85 9.85 0 008.08 16a10 10 0 00-.2 2 9.92 9.92 0 00.2 2 10.17 10.17 0 00.57 1.9 9.42 9.42 0 00.94 1.74 9.86 9.86 0 002.8 2.81 9.83 9.83 0 001.75.94 10.17 10.17 0 001.9.57 9.92 9.92 0 002 .2 10 10 0 002-.2 9.85 9.85 0 001.89-.57 9.5 9.5 0 001.75-.94 9.85 9.85 0 001.54-1.26 10.32 10.32 0 001.24-1.49 10.61 10.61 0 00.89-1.7 9.68 9.68 0 00.53-1.6 10.49 10.49 0 00.24-1.4H9.45a11.37 11.37 0 01.14-2.67 7.9 7.9 0 01.49-1.61 7.85 7.85 0 01.79-1.49 9.7 9.7 0 011.07-1.31 9.12 9.12 0 011.31-1.07 7.85 7.85 0 011.49-.79 7.9 7.9 0 011.61-.49 8.34 8.34 0 013.35 0 7.9 7.9 0 011.61.49 8.16 8.16 0 011.49.79 9.7 9.7 0 011.31 1.07c.2.2.39.42.58.65s.35.46.52.71.3.49.44.75.25.52.36.79l.26.65h-2.14a7.05 7.05 0 00-1-1.68 6.67 6.67 0 00-1.42-1.28 5.94 5.94 0 00-1.14-.61 6.26 6.26 0 00-1.23-.37 6.52 6.52 0 00-2.59 0 6.26 6.26 0 00-1.23.37 5.66 5.66 0 00-1.14.61 7.24 7.24 0 00-1 .82 7.07 7.07 0 00-1.29 1.82 6.82 6.82 0 00-.6 1.85h18.65a15.78 15.78 0 01-.21 3.36 12.19 12.19 0 01-.69 2.27 12.52 12.52 0 01-1.12 2.11 12.75 12.75 0 01-1.51 1.84A12.17 12.17 0 0118 30.13a12.26 12.26 0 01-2.36-.23 11.48 11.48 0 01-2.27-.69 12.14 12.14 0 01-2.11-1.12 12.75 12.75 0 01-1.84-1.51 12.1 12.1 0 01-2.63-3.94 12 12 0 01-.9-4.64 12.29 12.29 0 01.23-2.37 12.21 12.21 0 011.81-4.37 11.73 11.73 0 011.51-1.85A12.13 12.13 0 0118 5.86M4.26 18.15v.95a2.45 2.45 0 010 .27L0 18.73v-1.19l4.33-1v1.53zM6 11.25l.18-.25.09-.15.11-.16.11-.16.12-.17-3.88-1.88-.59 1 3.32 2.85v-.06l.1-.21v-.07l.08-.16.07-.14v-.06l.29-.26zm5-5.09l.27-.16h.1l.15-.09h.16l.14-.07.18-.21h.07l.17-.08h.05L9.54 2.12l-1 .59L10 6.85l.19-.14h.07l.18-.12h.1l.18-.12.28-.29zM24.76 6l.28.15.19.11h.07l.18.11h.11l.15.1h.11l.15.1.12-.34 1.33-3.8-1-.59-2.8 3.6h.05l.23.1h.05l.18.08h.28l.12.07h.13zm5.09 5l.16.28v.05l.07.14.07.14v.48l.07.16v.07l.27-.23 3.41-2.57-.6-1-4.14 1.42.13.17.1.14.11.17.1.16zm1.92 6.85v.4a1.69 1.69 0 010 .23V19.34l.34-.05 4-.61v-1.19l-4.34-1v1.06a1.21 1.21 0 010 .19v.1zM17.86 4.24c-.42 0-.84 0-1.25.07L17.42 0h1.19l.81 4.31c-.41 0-.83-.07-1.25-.07zM6 24.89l.16.27.09.15.11.16.11.16.12.18-3.86 1.85-.59-1 3.32-2.84.1.21v.07l.08.15.07.14v.06l.07.13H6zM11 30l.27.16h.1l.15.08h.16l.14.07.14.07h.07l.17.08h.05L9.54 34l-1-.59L10 29.3l.19.13.18.12h.1l.18.12.35.33zm13.76.16L25 30l.19-.11h.08l.18-.12h.13l.15-.1h.09l.15-.1.12.34 1.33 3.8-1 .59-2.77-3.6h.05l.23-.11h.05l.18-.09h.28l.12-.07h.13zm5.09-5l.16-.27v-.05l.07-.14v-.11l.07-.14v-.23l.07-.16v-.07l.27.23 3.06 2.62-.6 1-4.14-1.45.13-.18a1.3 1.3 0 01.1-.15l.11-.16.1-.17zm-12 6.74a10.36 10.36 0 01-1.25-.07l.81 4.31h1.19l.81-4.31a10.36 10.36 0 01-1.25.07z" class="a"></path>
      </svg>
      <p style="margin-left: 10px; color: rgb(181,140,94);">Golden Sucos</p>
    </div>
    <nav>
      <ul class="menu">
        <img src="../assets/icon_tanks.png" alt="">
      </ul>
    </nav>
  </header>
  <section style="padding-top: 100px;">Controle de Estoque</section>
  <section>
    <div class="box-tank">
      <p style="font-size: 2rem;"> Tanque 1</p>
      <div class="tank">
        <img src="../assets/tank.png" style="width: 150px;height: fit-content;position: relative;">
        <div class="level-bar">
          <div style="border: solid 1px;width: 35px;height: 140px;background: white; z-index: 1; "></div>
          <div style="width: 35px;height: 80px;background-color: green;z-index: 2;margin-bottom: 1px;    margin-left: -35.8px; transition: 0.5s ease"></div>
        </div>
        <div style="display: grid;align-content: center; margin-left: 10px;">
          <p style="font-size: 1.4rem;">0%</p>
          <p style="font-size: 1.4rem;">0 kg</p>
        </div>
      </div>
    </div>
    <div class="box-tank">
      <p style="font-size: 2rem;"> Tanque 2</p>
      <div class="tank">
        <img src="../assets/tank.png" style="width: 150px;height: fit-content;position: relative;">
        <div class="level-bar">
          <div style="border: solid 1px;width: 35px;height: 140px;background: white; z-index: 1; "></div>
          <div style="width: 35px;height: 80px;background-color: green;z-index: 2;margin-bottom: 1px;    margin-left: -35.8px; transition: 1s ease-in-out"></div>
        </div>
        <div style="display: grid;align-content: center; margin-left: 10px;">
          <p style="font-size: 1.4rem;">0%</p>
          <p style="font-size: 1.4rem;">0 kg</p>
        </div>
      </div>
    </div>

  </section>

  <footer>
    ©2023 by Germana
  </footer>
</body>

<script>
  const value = []
  // Função para preencher um número com zeros à esquerda para um comprimento específico
  function padWithZeros(number, length) {
    return number.toString().padStart(length, '0');
  }
  async function fetchData() {
    try {
      const response = await fetch('/dados');
      const data = await response.json();

      value[0] = JSON.parse(data).tanque1
      value[1] = JSON.parse(data).tanque2

      // Obter todos os elementos com a classe "tank"
      const tanks = document.getElementsByClassName("tank");

      Array.from(tanks).forEach((tank, index) => {
        // Encontrar o primeiro e o último elemento <p> dentro do tanque atual
        const pElements = tank.getElementsByTagName("p");

        if (pElements.length >= 2) {
          const firstP = pElements[0];
          const lastP = pElements[pElements.length - 1];

          // Gerar valores aleatórios
          Value1 = value[index]

          // Preencher com zeros à esquerda para garantir o mesmo comprimento
          firstP.innerText = padWithZeros(Value1, 2) + ' %'; // Exemplo: 2 dígitos
          lastP.innerText = padWithZeros(Math.floor(20000 * Value1 / 100), 5) + ' kg'; // Exemplo: 5 dígitos

          // Ajustar a altura da segunda div dentro da div com a classe "level-bar"
          const levelBar = tank.querySelector('.level-bar');
          if (levelBar) {
            const innerDivs = levelBar.getElementsByTagName('div');
            if (innerDivs.length >= 2) {
              const secondDiv = innerDivs[1];
              // Extrair o valor numérico de firstP.innerText e definir como altura
              const heightValue = parseInt(firstP.innerText, 10); // Obter o número
              secondDiv.style.height = heightValue * 1.4 + 'px'; // Definir a altura em pixels
              secondDiv.style.backgroundColor = "hsl(" + Value1 + " 100% 25% / 1)"
            }
          }
        }
      });
    } catch (error) {
      console.error('Erro ao buscar dados:', error);
    }
  }
  // Atualiza os dados a cada 10 segundos
  setInterval(fetchData, 10000);
  // Carrega os dados inicialmente
  fetchData();
</script>

</html>